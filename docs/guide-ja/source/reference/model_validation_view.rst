.. _ref-model_validation_view:

モデル検証ビュー
================================
編集中の設計モデル中の不整合を一覧表示、操作するビューを提供します。

.. figure:: /images/reference/model_validation_view/model_validation_view.jpg
   :alt: モデル検証ビュー

モデル更新時に、自動的にモデルを検証
----------------------------------------
.. figure:: /images/reference/model_validation_view/auto_update.jpg
   :alt: モデル更新時に、自動的にモデルを検証

[モデル更新時に、自動的にモデルを検証]ボタンがONの場合、モデル更新時に自動的にモデル検証を行います。(デフォルト ON)

モデル検証ビューの更新
----------------------------
[更新]ボタンをクリックして、モデル検証の再実行を行います。

.. figure:: /images/reference/model_validation_view/update.jpg
   :alt: モデル検証ビューの更新

.. hint::
  モデル検証は、メニュー :menuselection:`ツール --> モデル検証` からも実行できます。
  メニューから実行した場合には、モデルに不整合があることを通知する警告ダイアログ、または、モデルの整合性が保たれていることを通知するダイアログが表示されます。

不整合一覧
-------------------------------
不整合一覧では、モデルの不整合を表形式で表示します。
一覧には以下の項目を表示します。

* 説明 － 不整合の内容説明
* 要素の種類 － 不整合のあるモデル要素の種類
* 要素 － 不整合のあるモデル要素名
* 要素のパス － 不整合のあるモデル要素のパス(パッケージのパスなど)
* エラーレベル － 不整合のエラーレベル(エラー種類とアイコン) :ref:`errorlevel-notes-label`

.. hint::
  モデル検証ビューのヘッダ(エラーレベル列)にマウスカーソルを合わせると、 :ref:`errorlevel-notes-label` がツールチップで表示されます。

.. _errorlevel-notes-label:

エラーレベルの凡例
^^^^^^^^^^^^^^^^^^^^^^^^
モデル検証ビューでは以下のエラーレベルを設定しています。

.. list-table::
   :widths: 15 50
   :header-rows: 1

   * - エラーレベル
     - 説明
   * - |critical_icon| 致命的なエラー
     - 設計されたモデルからコンポーネントを生成できないため、問題の修正が必要です。
   * - |error_icon| エラー
     - 生成されたコンポーネントが正しく動作しない可能性があるため、問題の修正が必要です。
   * - |warning_icon| 警告
     - コンポーネントの設計に潜在的な問題が存在する可能性があるため、問題の調査が必要です。
   * - |notice_icon| 通知
     - 注意を喚起したい情報を表示します。

不整合に対する操作
-------------------------------

エラー行のクリック
^^^^^^^^^^^^^^^^^^^^^^^^^
プロパティビューに選択した行の要素のプロパティを表示します。

エラー行のダブルクリック
^^^^^^^^^^^^^^^^^^^^^^^^^^
選択した行の要素の図要素があれば、図を表示します。

* エラー対象の図要素を図の中心に表示し、選択状態にします。
* 複数図要素がある場合は、一つ目の図要素を表示します。
* 図要素がない場合は、何も表示しません。

図要素へジャンプ
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
| エラー行を選択し右クリック後、[図要素へジャンプ]を選択、図を選択すると、不整合のあった要素の図要素を表示します。
| 図要素が存在しない要素を選択した場合には、[図要素へジャンプ]は非活性になっています。

* エラー対象の図要素を図の中心に表示し、選択状態にします。
* 複数図要素がある場合は、一つ目の図要素を表示します。

構造ツリーのモデルへジャンプ
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
| エラー行を選択し右クリック後、[構造ツリーのモデルへジャンプ]を選択すると、構造ツリー上のモデルを選択します。
| コネクタなど構造ツリー上に表示されない要素を選択した場合には、[構造ツリーのモデルへジャンプ]は非活性になっています。

.. _quickfix-label:

QuickFix
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
| QuickFixは不整合の解決をサポートする機能です。
| エラー行を選択し右クリック後、[QuickFix]を選択すると、解決の提案が可能な不整合について、複数の解決提案を表示します。
| 解決の提案がない不整合については、[QuickFix]は非活性になっています。
| エラー行を選択して、「 **Ctrl + 1** 」でもQuickFixを表示することができます。

.. note::
  QuickFixにより不整合を解決した場合、モデル検証が自動で再実行されます。
  [モデル更新時に、自動的にモデルを検証]ボタンをOFFにしている場合でも、再実行を行います。

ヘルプ
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
エラー行を解決するために参考になるマニュアルの該当箇所を表示する機能です。

ソートと表示順序
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
| 列のヘッダをクリックすることで、各列毎のソートが可能です。(初期表示時は、カテゴリの昇順)
| 列のドラッグにより、列の表示順序を変更することもできます。

表示領域
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
| モデル検証ビューの上部のバーをマウスでドラッグすることで、高さの変更が可能です。
| プロジェクトビュー同様にモデル検証ビューを非表示にすることも可能です。

.. figure:: /images/reference/model_validation_view/view_showhide.jpg
   :alt: モデル検証ビューの表示/非表示

.. hint::
  モデル検証ビューの表示/非表示は、メニュー :menuselection:`表示 --> モデル検証ビューの表示/非表示` からも実行できます。

不整合一覧で検出、表示する項目
-------------------------------
不整合一覧では以下の項目を検出、表示しています。

設計時やマージ時のモデルに対する不整合一覧
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 17 18 35 15
   :header-rows: 1

   * - 要素名
     - 項目名
     - 不整合内容
     - エラーレベル
   * - プロジェクト
     - 名前
     - 必須、 英数字、およびハイフン、アンダースコアのみ
     - |critical_icon| 致命的なエラー
   * - パッケージ
     - 名前
     - 必須、 :term:`identifier`
     - |critical_icon| 致命的なエラー
   * - Systemコンポーネント
     - 名前
     - 必須、 :term:`identifier`
     - |critical_icon| 致命的なエラー
   * - コンポーネント
     - 階層構造
     - コンポーネントの階層構造にループがある
     - |critical_icon| 致命的なエラー
   * - －
     - 名前
     - 必須、 :term:`identifier`
     - |critical_icon| 致命的なエラー
   * - －
     - ポート
     - コンポーネントにポートが定義されていない
     - |notice_icon| 通知
   * - －
     - カテゴリ
     - 必須
     - |critical_icon| 致命的なエラー
   * - －
     - カテゴリ
     -  :term:`複合コンポーネント` にcomposite.PeriodicECSharedが設定されていない
     - |critical_icon| 致命的なエラー
   * - －
     - 複合コンポーネント種類
     -  :term:`複合コンポーネント` にPeriodicECSharedが設定されていない
     - |critical_icon| 致命的なエラー
   * - －
     - コンフィギュレーションのプロパティ名
     - membersとexported_portsがプロパティ名に使用されている
     - |critical_icon| 致命的なエラー
   * - パート
     - 名前
     - 必須、 :term:`identifier`
     - |critical_icon| 致命的なエラー
   * - －
     - 名前
     - コンポーネント配下のパート名が衝突している
     - |critical_icon| 致命的なエラー
   * - －
     - 優先度
     - 0から255までの数値以外が設定されている
     - |warning_icon| 警告
   * - ポート(データポート、サービスポート)
     - 名前
     - 必須、半角英数記号のみ(ピリオド、空白は不可)、 :term:`identifier`
     - |critical_icon| 致命的なエラー
   * - －
     - 名前
     - ポート名が重複している
     - |critical_icon| 致命的なエラー
   * -  :term:`公開ポート` (データポート、サービスポート)
     -  :term:`委譲コネクタ` 
     - 一つの :term:`公開ポート` に複数の :term:`委譲コネクタ` が接続されている
     - |warning_icon| 警告
   * -  :term:`内部ポート` (データポート、サービスポート)
     - コネクタ
     - 一つの :term:`内部ポート` に複数の :term:`委譲コネクタ` が接続されている
     - |warning_icon| 警告
   * - サービスポート
     - インターフェース
     - 一つのサービスポートに同一のインターフェースが複数定義されている
     - |warning_icon| 警告
   * - －
     - －
     - サービスポートにインターフェースが接続されていない
     - |warning_icon| 警告
   * - コネクタ(データポート間、サービスポート間)
     - 名前
     - 必須、半角英数記号のみ
     - |critical_icon| 致命的なエラー
   * - －
     - モデル
     - 同一パート間にコネクタが重複している
     - |critical_icon| 致命的なエラー
   * - コネクタ(データポート間)
     - データポートの組合せ
     - データ送信ポートとデータ受信ポートの組合せになっていない
     - |critical_icon| 致命的なエラー
   * - －
     - データポートの型
     - コネクタに接続するデータポートの型が一致していない
     - |warning_icon| 警告
   * - －
     - －
     - データポートの型にインターフェースが定義されている
     - |critical_icon| 致命的なエラー
   * - －
     - データ送信レート[ベース]
     - サブスクリプションタイプがperiodicの場合必須、正の数値
     - |warning_icon| 警告
   * - －
     - 送信データスキップ数[ベース]
     - サブスクリプションタイプがnew,periodicかつデータ送信ポリシーがskipの場合必須、0または正の整数
     - |warning_icon| 警告
   * - －
     - バッファ長[バッファ（出力ポート）]
     - 必須、0、または正の整数
     - |warning_icon| 警告
   * - －
     - バッファ書き込みタイムアウト[sec][バッファ（出力ポート）]
     - 必須、正の数値
     - |warning_icon| 警告
   * - －
     - バッファ読み出しタイムアウト[sec][バッファ（出力ポート）]
     - 必須、正の数値
     - |warning_icon| 警告
   * - －
     - バッファ長[バッファ（入力ポート）]
     - 必須、0または正の整数
     - |warning_icon| 警告
   * - －
     - バッファ書き込みタイムアウト[sec][バッファ（入力ポート）]
     - 必須、正の数値
     - |warning_icon| 警告
   * - －
     - バッファ読み出しタイムアウト[sec][バッファ（入力ポート）]
     - 必須、正の数値
     - |warning_icon| 警告
   * -  :term:`委譲コネクタ` (データポート間)
     - データポートの組合せ
     - データ送信ポート同士、データ受信ポート同士の組合せになっていない
     - |critical_icon| 致命的なエラー
   * - コネクタ(サービスポート間)
     - サービスポート名
     - コネクタで接続するサービスポートの名前が一致していない
     - |error_icon| エラー
   * - －
     - サービスポートのIF
     - コネクタに接続するサービスポートのインターフェースが一致していない
     - |error_icon| エラー
   * - インターフェース/クラス
     - 名前
     - 必須、 :term:`identifier`
     - |critical_icon| 致命的なエラー
   * - －
     - 属性
     - 必須、 :term:`identifier`
     - |critical_icon| 致命的なエラー
   * - －
     - －
     - 属性の型にsequenceを直接利用している。 解決策は :ref:`ref-customtype-sequence` を参照のこと。
     - |notice_icon| 通知
   * - －
     - 操作
     - 必須、 :term:`identifier`
     - |critical_icon| 致命的なエラー
   * - －
     - －
     - 同一シグニチャの操作が重複している
     - |critical_icon| 致命的なエラー
   * - －
     - パラメタ
     - パラメタの型にsequenceを直接利用している。 解決策は :ref:`ref-customtype-sequence` を参照のこと。
     - |notice_icon| 通知
   * - －
     - 返り値
     - 返り値の型にsequenceを直接利用している。 解決策は :ref:`ref-customtype-sequence` を参照のこと。
     - |notice_icon| 通知
   * - －
     - 関連端
     - 関連端の多重度が0, 1, 0..1以外である。 解決策は :ref:`ref-customtype-multiple` を参照のこと。
     - |notice_icon| 通知
   * - 独自データ型
     - －
     - 自クラス/インターフェースの参照をしている
     - |critical_icon| 致命的なエラー

.. |critical_icon| image:: /images/reference/model_validation_view/critical_icon.jpg
.. |error_icon| image:: /images/reference/model_validation_view/error_icon.jpg
.. |warning_icon| image:: /images/reference/model_validation_view/warning_icon.jpg
.. |notice_icon| image:: /images/reference/model_validation_view/notice_icon.jpg
